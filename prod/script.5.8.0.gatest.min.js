<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-86809103-6">
{{html "</sc"+"ript>"}}
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-86809103-6');
{{html "</sc"+"ript>"}}

function thermostatEvent(t,e){window[t.data("device")]&&clearTimeout(window[t.data("device")]);var i=parseInt(t.attr("data-setpoint"));i<maxTemp&&i>minTemp&&(i+=e,t.find(".icon.setpoint .whole").html(i)),t.attr("data-setpoint",i),window[t.data("device")]=setTimeout(function(){animateClick(t),sendCommand(t.attr("data-type"),t.attr("data-device"),"setpoint",i)},500)}function animateClick(t){spinner(t),t.closest(".tile").animate({opacity:.3},fadeOff,"swing").delay(fadeOn).animate({opacity:1},fadeOn,"swing")}function spinner(t){t.closest(".tile").find(".spinner").fadeIn("slow").delay(2e3).fadeOut("slow")}function setIcons(){$(".switch").append("<div class='icon'>"+icons["switch"].on+icons["switch"].off+"</div>"),$(".dimmer").append("<div class='icon'>"+icons.dimmer.on+icons.dimmer.off+"</div>"),$(".light").append("<div class='icon'>"+icons.light.on+icons.light.off+"</div>"),$(".dimmerLight").append("<div class='icon'>"+icons.light.on+icons.light.off+"</div>"),$(".themeLight").append("<div class='icon'>"+icons.themeLight.on+icons.themeLight.off+"</div>"),$(".lock").append("<div class='icon'>"+icons.lock.locked+icons.lock.unlocked+"</div>"),$(".motion").append("<div class='icon'>"+icons.motion.active+icons.motion.inactive+"</div>"),$(".acceleration").append("<div class='icon'>"+icons.acceleration.active+icons.acceleration.inactive+"</div>"),$(".presence").append("<div class='icon'>"+icons.presence.present+icons.presence.notPresent+"</div>"),$(".contact").append("<div class='icon'>"+icons.contact.open+icons.contact.closed+"</div>"),$(".water").append("<div class='icon'>"+icons.water.dry+icons.water.wet+"</div>"),$(".alarm").append("<div class='icon'>"+icons.alarm.armed+icons.alarm.disarmed+"</div>"),$(".dimmer, .dimmerLight, .music").each(function(){renderSlider($(this))}),$(".momentary").append("<div class='icon'>"+icons.momentary+"</div>"),$(".camera").append("<div class='icon'>"+icons.camera+"</div>"),$(".refresh").append("<div class='icon'>"+icons.refresh+"</div>"),$(".history").append("<div class='icon'>"+icons.history+"</div>"),$(".hello-home").append("<div class='icon'>"+icons["hello-home"]+"</div>"),$(".humidity").append("<div class='footer'>"+icons.humidity+"</div>"),$(".luminosity").append("<div class='footer'>"+icons.luminosity+"</div>"),$(".temperature").append("<div class='footer'>"+icons.temperature+"</div>"),$(".energy").append("<div class='footer'>"+icons.energy+"</div>"),$(".power").append("<div class='footer'>"+icons.power+"</div>"),$(".battery").append("<div class='footer'>"+icons.battery+"</div>"),$(".link").find("a").html(icons.link),$(".dashboard").find("a").html(icons.dashboard),$(".tile[data-is-value=true]").each(function(){renderValue($(this))})}function renderSlider(t){t.find(".slider-container").remove(),t.append("<div class='slider-container'><div class='full-width-slider'><input value='"+t.attr("data-level")+"' min='1' max='10' type='range' step='1' data-mini='true' data-popup-enabled='true' data-disabled='"+readOnlyMode+"' data-highlight='true'></div></div>").find("input").slider(),$(".full-width-slider").click(function(t){t.stopImmediatePropagation()})}function renderValue(t){t.find(".icon").remove(),t.append("<div class='icon text'>"+t.attr("data-value")+"</div>")}function updateWeather(t,e){t.find(".title2").html(e.weather+", feels like "+e.feelsLike+"&deg;"),t.find(".icon.text").html(e.temperature+"&deg;"),t.find(".icon i").attr("class","wi "+e.icon),t.find(".footer").html(e.localSunrise+' <i class="fa fa-fw wi wi-horizon-alt"></i> '+e.localSunset),t.find(".footer.right").html(e.percentPrecip+"%<i class='fa fa-fw fa-umbrella'></i><br>"+e.humidity+"%<i class='fa fa-fw wi wi-sprinkles'></i>")}function updateThermostat(t,e){t.find(".title2").html(e.temperature+"&deg;, "+e.thermostatOperatingState),t.find(".icon.setpoint .whole").html(e.setpoint),t.find(".footer").html("&#10044; "+e.thermostatFanMode+(e.humidity?",<i class='fa fa-fw wi wi-sprinkles'></i>"+e.humidity+"%":"")),t.attr("data-setpoint",e.setpoint),t.attr("data-operating-state",e.thermostatOperatingState),t.removeClass("null-setpoint"),e.setpoint||t.addClass("null-setpoint")}function sendCommand(t,e,i,a){var o=getUrlParameter("access_token"),n={type:t,device:e,command:i,value:a};o&&(n.access_token=o),$.get("command",n).done(function(t){"ok"==t.status&&nextPoll(5)}).fail(function(){setWTFCloud(),nextPoll(10)})}function doPoll(t){nextPoll(pollingRate),t||spinner($(".refresh"));var e=getUrlParameter("access_token"),a={ts:stateTS,stateID:stateID};e&&(a.access_token=e),$.get("ping",a).done(function(e){if("reload"==e.status)return $(".refresh .icon").addClass("fa-spin"),void location.reload();if(clearWTFCloud(),t)t();else if(stateTS=e.ts,$(".refresh .footer").html("Updated "+e.updated),"update"==e.status)for(i in e.data)updateTile(e.data[i])}).fail(function(){setWTFCloud()})}function updateTile(t){if("device"==t.tile){var e=$("."+t.type+"[data-device="+t.device+"]");"music"==t.type&&((t.trackDescription!=e.attr("data-track-description")||t.mute+""!=e.attr("data-mute"))&&spinner(e),e.attr("data-track-description",t.trackDescription),t.mute+""!=e.attr("data-mute")&&e.toggleClass("muted"),e.attr("data-mute",t.mute),e.find(".title .track").html(e.attr("data-track-description"))),"thermostatHeat"==t.type||"thermostatCool"==t.type?(checkDataForUpdates(e,t),updateThermostat(e,t)):"weather"==t.type?(checkDataForUpdates(e,t),updateWeather(e,t)):(t.value!=e.attr("data-value")&&spinner(e),e.attr("data-value",t.value),t.isValue?renderValue(e):(e.removeClass("inactive active").addClass(t.active),e.attr("data-active",t.active)),("dimmer"==t.type||"dimmerLight"==t.type||"music"==t.type)&&(t.level!=e.attr("data-level")&&spinner(e),e.attr("data-level",t.level),renderSlider(e)))}else if("mode"==t.tile){var e=$(".mode");t.mode!=e.attr("data-mode")&&spinner(e),e.removeClass(e.attr("data-mode")),e.attr("data-mode",t.mode),t.isStandardMode&&e.addClass(t.mode),$(".mode-name").html(t.mode)}else"alarm"==t.tile&&updateAlarmTile(t.status)}function updateAlarmTile(t){var e="away"==t||"stay"==t?"active":"inactive",i=$(".alarm");t!=i.attr("data-status")&&spinner(i),i.attr("data-status",t);var a={off:"Disarmed",away:"Armed (away)",stay:"Armed (stay)"}[t];i.find(".footer").html(a?a:t),i.removeClass("inactive active").addClass(e)}function checkDataForUpdates(t,e){e.name=null;var i=t.attr("data-data");if(i)try{i=JSON.parse(i);for(k in i)if(i[k]!=""+e[k]){spinner(t);break}}catch(a){spinner(t)}else spinner(t);t.attr("data-data",JSON.stringify(e))}function setWTFCloud(){wtfCloud=!0,$("#wtfcloud-popup").popup("open")}function clearWTFCloud(){wtfCloud=!1,$("#wtfcloud-popup").popup("close")}function nextPoll(t){polling&&clearInterval(polling),polling=setInterval(function(){doPoll()},1e3*t)}function refresh(t){t?setTimeout(function(){doRefresh()},1e3*t):setTimeout(function(){doRefresh()},100)}function doRefresh(){$(".refresh .icon").addClass("fa-spin"),location.reload()}function getUrlParameter(t){for(var e=window.location.search.substring(1),i=e.split("&"),a=0;a<i.length;a++){var o=i[a].split("=");if(o[0]==t)return o[1]}}function getClockColor(){return"quartz"==theme?"#555":"onyx"==theme?"wheat":"sballoz"==theme?"#ffa500":"white"}function startTime(){if(document.getElementById("clock")){var t=new Date,e=t.getHours(),i=t.getMinutes();if(i=checkTime(i),"12 Hour Clock"==clockFormat){var a=e>=12;e>12&&(e-=12),0==e&&(e=12),document.getElementById("clock").innerHTML=e+":"+i+(a?"pm":"am")}else e=checkTime(e),document.getElementById("clock").innerHTML=e+":"+i;setTimeout(function(){startTime()},1e3)}}function checkTime(t){return 10>t&&(t="0"+t),t}var scriptVersion="5.8.0";$.ajaxSetup({cache:!1}),window.CoolClock=function(t){return this.init(t)},CoolClock.config={tickDelay:1e3,longTickDelay:15e3,defaultRadius:85,renderRadius:100,defaultSkin:"chunkySwiss",showSecs:!0,showAmPm:!0,skins:{swissRail:{outerBorder:{lineWidth:2,radius:95,color:"black",alpha:1},smallIndicator:{lineWidth:2,startAt:88,endAt:92,color:"black",alpha:1},largeIndicator:{lineWidth:4,startAt:79,endAt:92,color:"black",alpha:1},hourHand:{lineWidth:8,startAt:-15,endAt:50,color:"black",alpha:1},minuteHand:{lineWidth:7,startAt:-15,endAt:75,color:"black",alpha:1},secondHand:{lineWidth:1,startAt:-20,endAt:85,color:"red",alpha:1},secondDecoration:{lineWidth:1,startAt:70,radius:4,fillColor:"red",color:"red",alpha:1}},chunkySwiss:{outerBorder:{lineWidth:4,radius:97,color:"black",alpha:1},smallIndicator:{lineWidth:4,startAt:89,endAt:93,color:"black",alpha:1},largeIndicator:{lineWidth:8,startAt:80,endAt:93,color:"black",alpha:1},hourHand:{lineWidth:12,startAt:-15,endAt:60,color:"black",alpha:1},minuteHand:{lineWidth:10,startAt:-15,endAt:85,color:"black",alpha:1},secondHand:{lineWidth:4,startAt:-20,endAt:85,color:"red",alpha:1},secondDecoration:{lineWidth:2,startAt:70,radius:8,fillColor:"red",color:"red",alpha:1}},chunkySwissOnBlack:{outerBorder:{lineWidth:4,radius:97,color:"white",alpha:1},smallIndicator:{lineWidth:4,startAt:89,endAt:93,color:"white",alpha:1},largeIndicator:{lineWidth:8,startAt:80,endAt:93,color:"white",alpha:1},hourHand:{lineWidth:12,startAt:-15,endAt:60,color:"white",alpha:1},minuteHand:{lineWidth:10,startAt:-15,endAt:85,color:"white",alpha:1},secondHand:{lineWidth:4,startAt:-20,endAt:85,color:"red",alpha:1},secondDecoration:{lineWidth:2,startAt:70,radius:8,fillColor:"red",color:"red",alpha:1}}},isIE:!!document.all,clockTracker:{},noIdCount:0},CoolClock.prototype={init:function(t){return this.canvasId=t.canvasId,this.skinId=t.skinId||CoolClock.config.defaultSkin,this.displayRadius=t.displayRadius||CoolClock.config.defaultRadius,this.showSecondHand="boolean"==typeof t.showSecondHand?t.showSecondHand:!0,this.gmtOffset=null!=t.gmtOffset&&""!=t.gmtOffset?parseFloat(t.gmtOffset):null,this.showDigital="boolean"==typeof t.showDigital?t.showDigital:!1,this.logClock="boolean"==typeof t.logClock?t.logClock:!1,this.logClockRev="boolean"==typeof t.logClock?t.logClockRev:!1,this.tickDelay=CoolClock.config[this.showSecondHand?"tickDelay":"longTickDelay"],this.canvas=document.getElementById(this.canvasId),this.canvas.setAttribute("width",2*this.displayRadius),this.canvas.setAttribute("height",2*this.displayRadius),this.canvas.style.width=2*this.displayRadius+"px",this.canvas.style.height=2*this.displayRadius+"px",this.renderRadius=CoolClock.config.renderRadius,this.scale=this.displayRadius/this.renderRadius,this.ctx=this.canvas.getContext("2d"),this.ctx.scale(this.scale,this.scale),CoolClock.config.clockTracker[this.canvasId]=this,this.tick(),this},fullCircleAt:function(t,e,i){this.ctx.save(),this.ctx.globalAlpha=i.alpha,this.ctx.lineWidth=i.lineWidth,CoolClock.config.isIE||this.ctx.beginPath(),CoolClock.config.isIE&&(this.ctx.lineWidth=this.ctx.lineWidth*this.scale),this.ctx.arc(t,e,i.radius,0,2*Math.PI,!1),CoolClock.config.isIE&&this.ctx.arc(t,e,i.radius,-.1,.1,!1),i.fillColor?(this.ctx.fillStyle=i.fillColor,this.ctx.fill()):(this.ctx.strokeStyle=i.color,this.ctx.stroke()),this.ctx.restore()},drawTextAt:function(t,e,i){this.ctx.save(),this.ctx.font="15px sans-serif";var a=this.ctx.measureText(t);a.height||(a.height=15),this.ctx.fillText(t,e-a.width/2,i-a.height/2),this.ctx.restore()},lpad2:function(t){return(10>t?"0":"")+t},tickAngle:function(t){var e=3;return this.logClock?0==t?0:Math.log(t*e)/Math.log(60*e):this.logClockRev?(t=(60-t)%60,1-(0==t?0:Math.log(t*e)/Math.log(60*e))):t/60},timeText:function(t,e,i){var a=CoolClock.config;return""+(a.showAmPm?t%12==0?12:t%12:t)+":"+this.lpad2(e)+(a.showSecs?":"+this.lpad2(i):"")+(a.showAmPm?12>t?" am":" pm":"")},radialLineAtAngle:function(t,e){this.ctx.save(),this.ctx.translate(this.renderRadius,this.renderRadius),this.ctx.rotate(Math.PI*(2*t-.5)),this.ctx.globalAlpha=e.alpha,this.ctx.strokeStyle=e.color,this.ctx.lineWidth=e.lineWidth,CoolClock.config.isIE&&(this.ctx.lineWidth=this.ctx.lineWidth*this.scale),e.radius?this.fullCircleAt(e.startAt,0,e):(this.ctx.beginPath(),this.ctx.moveTo(e.startAt,0),this.ctx.lineTo(e.endAt,0),this.ctx.stroke()),this.ctx.restore()},render:function(t,e,i){var a=CoolClock.config.skins[this.skinId];a||(a=CoolClock.config.skins[CoolClock.config.defaultSkin]),this.ctx.clearRect(0,0,2*this.renderRadius,2*this.renderRadius),a.outerBorder&&this.fullCircleAt(this.renderRadius,this.renderRadius,a.outerBorder);for(var o=0;60>o;o++)o%5&&a.smallIndicator&&this.radialLineAtAngle(this.tickAngle(o),a.smallIndicator),!(o%5)&&a.largeIndicator&&this.radialLineAtAngle(this.tickAngle(o),a.largeIndicator);this.showDigital&&this.drawTextAt(this.timeText(t,e,i),this.renderRadius,this.renderRadius+this.renderRadius/2),a.hourHand&&this.radialLineAtAngle(this.tickAngle(t%12*5+e/12),a.hourHand),a.minuteHand&&this.radialLineAtAngle(this.tickAngle(e+i/60),a.minuteHand),this.showSecondHand&&a.secondHand&&this.radialLineAtAngle(this.tickAngle(i),a.secondHand),!CoolClock.config.isIE&&this.showSecondHand&&a.secondDecoration&&this.radialLineAtAngle(this.tickAngle(i),a.secondDecoration)},refreshDisplay:function(){var t=new Date;if(null!=this.gmtOffset){var e=new Date(t.valueOf()+1e3*this.gmtOffset*60*60);this.render(e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds())}else this.render(t.getHours(),t.getMinutes(),t.getSeconds())},nextTick:function(){setTimeout("CoolClock.config.clockTracker['"+this.canvasId+"'].tick()",this.tickDelay)},stillHere:function(){return null!=document.getElementById(this.canvasId)},tick:function(){this.stillHere()&&(this.refreshDisplay(),this.nextTick())}},CoolClock.findAndCreateClocks=function(){for(var t=document.getElementsByTagName("canvas"),e=0;e<t.length;e++){var i=t[e].className.split(" ")[0].split(":");"CoolClock"==i[0]&&(t[e].id||(t[e].id="_coolclock_auto_id_"+CoolClock.config.noIdCount++),new CoolClock({canvasId:t[e].id,skinId:i[1],displayRadius:i[2],showSecondHand:"noSeconds"!=i[3],gmtOffset:i[4],showDigital:"showDigital"==i[5],logClock:"logClock"==i[6],logClockRev:"logClockRev"==i[6]}))}},window.jQuery&&jQuery(document).ready(CoolClock.findAndCreateClocks),!function(t){function e(e){function a(e){var i=(d.gutterX,d.gutterY,d.cellH),a=d.cellW,n=t(e),l=n.find(n.attr("data-handle"));o.setDraggable(e,{handle:l[0],onStart:function(t){c.animate&&o.transition&&o.setTransition(this,""),n.css("z-index",9999).addClass("fw-float"),c.onBlockDrag.call(e,t)},onDrag:function(t){var o=n.position(),l=Math.round(o.top/i),s=Math.round(o.left/a),h=Math.round(n.width()/a),u=Math.round(n.height()/i);l=Math.min(Math.max(0,l),d.limitRow-u),s=Math.min(Math.max(0,s),d.limitCol-h),r.setHoles({top:l,left:s,width:h,height:u}),r.refresh(),c.onBlockMove.call(e,t)},onDrop:function(o){var l=n.position(),s=Math.round(l.top/i),h=Math.round(l.left/a),u=Math.round(n.width()/a),m=Math.round(n.height()/i);s=Math.min(Math.max(0,s),d.limitRow-m),h=Math.min(Math.max(0,h),d.limitCol-u),n.removeClass("fw-float"),n.css({zIndex:"auto",top:s*i,left:h*a});var f,p,g,v;for(p=0;m>p;++p)for(f=0;u>f;++f)g=p+s+"-"+(f+h),v=d.matrix[g],v&&1!=v&&t("#"+v).removeAttr("data-position");d.holes={},n.attr({"data-width":n.width(),"data-height":n.height(),"data-position":s+"-"+h}),r.refresh(),c.onBlockDrop.call(e,o)}})}var l=t(e);"static"==l.css("position")&&l.css("position","relative");var s=Number.MAX_VALUE,r=this;o.totalGrid+=1;var c=t.extend({},o.defaultConfig),d={arguments:null,blocks:{},events:{},matrix:{},holes:{},cellW:0,cellH:0,cellS:1,filter:"",lastId:0,length:0,maxWoB:0,maxHoB:0,minWoB:s,minHoB:s,running:0,gutterX:15,gutterY:15,totalCol:0,totalRow:0,limitCol:666666,limitRow:666666,sortFunc:null,keepOrder:!1};c.runtime=d,d.totalGrid=o.totalGrid;var h=document.body.style;o.transition||(null!=h.webkitTransition||null!=h.MozTransition||null!=h.msTransition||null!=h.OTransition||null!=h.transition)&&(o.transition=!0),t.extend(r,{addCustomEvent:function(t,e){var i=d.events;return t=t.toLowerCase(),!i[t]&&(i[t]=[]),e.eid=i[t].length,i[t].push(e),this},appendBlock:function(e){var i=t(e).appendTo(l),s=null,r=[];d.arguments&&(t.isFunction(d.sortFunc)&&i.sort(d.sortFunc),i.each(function(t,e){e.index=++t,s=o.loadBlock(e,c),s&&r.push(s)}),n[c.engine](r,c),o.setWallSize(d,l),d.length=i.length,i.each(function(t,e){o.showBlock(e,c),(c.draggable||e.getAttribute("data-draggable"))&&a(e)}))},appendHoles:function(t){var e,i=[].concat(t),a={};for(e=0;e<i.length;++e)a=i[e],d.holes[a.top+"-"+a.left+"-"+a.width+"-"+a.height]=a;return this},container:l,destroy:function(){var e=l.find(c.selector).removeAttr("id");e.each(function(e,i){$item=t(i);var a=1*$item.attr("data-width")||"",o=1*$item.attr("data-height")||"";$item.width(a).height(o).css({position:"static"})})},fillHoles:function(t){if(0==arguments.length)d.holes={};else{var e,i=[].concat(t),a={};for(e=0;e<i.length;++e)a=i[e],delete d.holes[a.top+"-"+a.left+"-"+a.width+"-"+a.height]}return this},filter:function(t){return d.filter=t,d.arguments&&this.refresh(),this},fireEvent:function(t,e,i){var a=d.events;if(t=t.toLowerCase(),a[t]&&a[t].length)for(var o=0;o<a[t].length;++o)a[t][o].call(this,e,i);return this},fitHeight:function(t){var t=t?t:l.height()||i.height();this.fitZone("auto",t),d.arguments=arguments},fitWidth:function(t){var t=t?t:l.width()||i.width();this.fitZone(t,"auto"),d.arguments=arguments},fitZone:function(e,s){var h=l.find(c.selector).removeAttr("id"),u=null,m=[];s=s?s:l.height()||i.height(),e=e?e:l.width()||i.width(),d.arguments=arguments,o.resetGrid(d),o.adjustUnit(e,s,c),d.filter?(h.data("active",0),h.filter(d.filter).data("active",1)):h.data("active",1),t.isFunction(d.sortFunc)&&h.sort(d.sortFunc),h.each(function(e,i){var a=t(i);i.index=++e,u=o.loadBlock(i,c),u&&a.data("active")&&m.push(u)}),r.fireEvent("onGridReady",l,c),n[c.engine](m,c),o.setWallSize(d,l),r.fireEvent("onGridArrange",l,c),d.length=h.length,h.each(function(t,e){o.showBlock(e,c),(c.draggable||e.getAttribute("data-draggable"))&&a(e)})},fixPos:function(e){return t(e.block).attr({"data-position":e.top+"-"+e.left}),this},fixSize:function(e){return null!=e.height&&t(e.block).attr({"data-height":e.height}),null!=e.width&&t(e.block).attr({"data-width":e.width}),this},prepend:function(t){return l.prepend(t),d.arguments&&this.refresh(),this},refresh:function(){var t=arguments.length?arguments:d.arguments,e=d.arguments,i=e?e.callee:this.fitWidth;return i.apply(this,Array.prototype.slice.call(t,0)),this},reset:function(e){return t.extend(c,e),this},setHoles:function(t){var e,i=[].concat(t),a={};for(d.holes={},e=0;e<i.length;++e)a=i[e],d.holes[a.top+"-"+a.left+"-"+a.width+"-"+a.height]=a;return this},sortBy:function(t){return d.sortFunc=t,d.arguments&&this.refresh(),this},unFilter:function(){return delete d.filter,this.refresh(),this}}),l.attr("data-min-width",80*Math.floor(i.width()/80));for(var u in o.plugin)o.plugin.hasOwnProperty(u)&&o.plugin[u].call(r,c,l);i.resize(function(){d.running||(d.running=1,setTimeout(function(){d.running=0,c.onResize.call(r,l)},122),l.attr("data-min-width",80*Math.floor(i.width()/80)))})}null==t.isNumeric&&(t.isNumeric=function(t){return null!=t&&t.constructor===Number}),null==t.isFunction&&(t.isFunction=function(t){return null!=t&&t instanceof Function});var i=t(window),a=t(document),o={defaultConfig:{animate:!1,cellW:100,cellH:100,delay:0,engine:"giot",fixSize:null,gutterX:15,gutterY:15,keepOrder:!1,selector:"> div",draggable:!1,cacheSize:!0,rightToLeft:!1,bottomToTop:!1,onGapFound:function(){},onComplete:function(){},onResize:function(){},onBlockDrag:function(){},onBlockMove:function(){},onBlockDrop:function(){},onBlockReady:function(){},onBlockFinish:function(){},onBlockActive:function(){},onBlockResize:function(){}},plugin:{},totalGrid:1,transition:!1,loadBlock:function(e,i){var a=i.runtime,o=a.gutterX,n=a.gutterY,l=a.cellH,s=a.cellW,r=null,c=t(e),d=c.data("active"),h=c.attr("data-position"),u=parseInt(c.attr("data-fixSize")),m=a.lastId++ +"-"+a.totalGrid;if(c.hasClass("fw-float"))return null;c.attr({id:m,"data-delay":e.index}),i.animate&&this.transition&&this.setTransition(e,""),isNaN(u)&&(u=null),null==u&&(u=i.fixSize);var f=u?"ceil":"round";null==c.attr("data-height")&&c.attr("data-height",c.height()),null==c.attr("data-width")&&c.attr("data-width",c.width());var p=1*c.attr("data-height"),g=1*c.attr("data-width");i.cacheSize||(e.style.width="",g=c.width(),e.style.height="",p=c.height());var v=g?Math[f]((g+o)/s):0,k=p?Math[f]((p+n)/l):0;if(u||"auto"!=i.cellH||(c.width(s*v-o),e.style.height="",p=c.height(),k=p?Math.round((p+n)/l):0),u||"auto"!=i.cellW||(c.height(l*k-n),e.style.width="",g=c.width(),v=g?Math.round((g+o)/s):0),null!=u&&(v>a.limitCol||k>a.limitRow))r=null;else if(k&&k<a.minHoB&&(a.minHoB=k),v&&v<a.minWoB&&(a.minWoB=v),k>a.maxHoB&&(a.maxHoB=k),v>a.maxWoB&&(a.maxWoB=v),0==g&&(v=0),0==p&&(k=0),r={resize:!1,id:m,width:v,height:k,fixSize:u},h){h=h.split("-"),r.y=1*h[0],r.x=1*h[1],r.width=null!=u?v:Math.min(v,a.limitCol-r.x),r.height=null!=u?k:Math.min(k,a.limitRow-r.y);var w=r.y+"-"+r.x+"-"+r.width+"-"+r.height;d?(a.holes[w]={id:r.id,top:r.y,left:r.x,width:r.width,height:r.height},this.setBlock(r,i)):delete a.holes[w]}return null==c.attr("data-state")?c.attr("data-state","init"):c.attr("data-state","move"),i.onBlockReady.call(e,r,i),h&&d?null:r},setBlock:function(t,e){var i=e.runtime,a=i.gutterX,o=i.gutterY,n=t.height,l=t.width,s=i.cellH,r=i.cellW,c=t.x,d=t.y;e.rightToLeft&&(c=i.limitCol-c-l),e.bottomToTop&&(d=i.limitRow-d-n);var h={fixSize:t.fixSize,resize:t.resize,top:d*s,left:c*r,width:r*l-a,height:s*n-o};return h.top=1*h.top.toFixed(2),h.left=1*h.left.toFixed(2),h.width=1*h.width.toFixed(2),h.height=1*h.height.toFixed(2),t.id&&(i.blocks[t.id]=h),h},showBlock:function(e,i){function a(){if(c&&s.attr("data-state","start"),i.animate&&r.transition&&r.setTransition(e,d),l)l.fixSize&&(l.height=1*s.attr("data-height"),l.width=1*s.attr("data-width")),s.css({opacity:1,width:l.width,height:l.height}),s[n]({top:l.top,left:l.left}),null!=s.attr("data-nested")&&r.nestedGrid(e,i);else{var t=parseInt(e.style.height)||0,a=parseInt(e.style.width)||0,h=parseInt(e.style.left)||0,u=parseInt(e.style.top)||0;s[n]({left:h+a/2,top:u+t/2,width:0,height:0,opacity:0})}o.length-=1,i.onBlockFinish.call(e,l,i),0==o.length&&i.onComplete.call(e,l,i)}var o=i.runtime,n=i.animate&&!this.transition?"animate":"css",l=o.blocks[e.id],s=t(e),r=this,c="move"!=s.attr("data-state"),d=c?"width 0.5s, height 0.5s":"top 0.5s, left 0.5s, width 0.5s, height 0.5s, opacity 0.5s";e.delay&&clearTimeout(e.delay),s.hasClass("fw-float")||(r.setTransition(e,""),e.style.position="absolute",i.onBlockActive.call(e,l,i),l&&l.resize&&i.onBlockResize.call(e,l,i),i.delay>0?e.delay=setTimeout(a,i.delay*s.attr("data-delay")):a())},nestedGrid:function(i,a){var o,n=t(i),l=a.runtime,s=n.attr("data-gutterX")||a.gutterX,r=n.attr("data-gutterY")||a.gutterY,c=n.attr("data-method")||"fitZone",d=n.attr("data-nested")||"> div",h=n.attr("data-cellH")||a.cellH,u=n.attr("data-cellW")||a.cellW,m=l.blocks[i.id];if(m)switch(o=new e(n),o.reset({cellH:h,cellW:u,gutterX:1*s,gutterY:1*r,selector:d,cacheSize:!1}),c){case"fitHeight":o[c](m.height);break;case"fitWidth":o[c](m.width);break;case"fitZone":o[c](m.width,m.height)}},adjustBlock:function(e,i){var a=i.runtime,o=a.gutterX,n=a.gutterY,l=t("#"+e.id),s=a.cellH,r=a.cellW;"auto"==i.cellH&&(l.width(e.width*r-o),l[0].style.height="",e.height=Math.round((l.height()+n)/s))},adjustUnit:function(e,i,a){var o=a.gutterX,n=a.gutterY,l=a.runtime,s=a.cellW,r=a.cellH;if(t.isFunction(s)&&(s=s(e)),s=1*s,!t.isNumeric(s)&&(s=1),t.isFunction(r)&&(r=r(i)),r=1*r,!t.isNumeric(r)&&(r=1),t.isNumeric(e)){1>s&&(s*=e);var c=Math.max(1,Math.floor(e/s));t.isNumeric(o)||(o=(e-c*s)/Math.max(1,c-1),o=Math.max(0,o)),c=Math.floor((e+o)/s),l.cellW=(e+o)/Math.max(c,1),l.cellS=l.cellW/s,l.gutterX=o,l.limitCol=c}if(t.isNumeric(i)){1>r&&(r*=i);var d=Math.max(1,Math.floor(i/r));t.isNumeric(n)||(n=(i-d*r)/Math.max(1,d-1),n=Math.max(0,n)),d=Math.floor((i+n)/r),l.cellH=(i+n)/Math.max(d,1),l.cellS=l.cellH/r,l.gutterY=n,l.limitRow=d}t.isNumeric(e)||(1>s&&(s=l.cellH),l.cellW=1!=s?s*l.cellS:1,l.gutterX=o,l.limitCol=666666),t.isNumeric(i)||(1>r&&(r=l.cellW),l.cellH=1!=r?r*l.cellS:1,l.gutterY=n,l.limitRow=666666),l.keepOrder=a.keepOrder},resetGrid:function(t){t.blocks={},t.length=0,t.cellH=0,t.cellW=0,t.lastId=1,t.matrix={},t.totalCol=0,t.totalRow=0},setDraggable:function(e,i){var o=!1,n={startX:0,startY:0,top:0,left:0,handle:null,onDrop:function(){},onDrag:function(){},onStart:function(){}};t(e).each(function(){function e(t){return t.stopPropagation(),t=t.originalEvent,t.touches&&(o=!0,t=t.changedTouches[0]),2!=t.button&&3!=t.which&&(r.onStart.call(d,t),r.startX=t.clientX,r.startY=t.clientY,r.top=parseInt(h.css("top"))||0,r.left=parseInt(h.css("left"))||0,a.bind("mouseup touchend",s),a.bind("mousemove touchmove",l)),!1}function l(t){t=t.originalEvent,o&&(t=t.changedTouches[0]),h.css({top:r.top-(r.startY-t.clientY),left:r.left-(r.startX-t.clientX)}),r.onDrag.call(d,t)}function s(t){t=t.originalEvent,o&&(t=t.changedTouches[0]),r.onDrop.call(d,t),a.unbind("mouseup touchend",s),a.unbind("mousemove touchmove",l)}var r=t.extend({},n,i),c=r.handle||this,d=this,h=t(d),u=t(c),m=h.css("position");"absolute"!=m&&h.css("position","relative"),h.find("iframe, form, input, textarea, .ignore-drag").each(function(){t(this).on("touchstart mousedown",function(t){t.stopPropagation()})}),a.unbind("mouseup touchend",s),a.unbind("mousemove touchmove",l),u.unbind("mousedown touchstart").bind("mousedown touchstart",e)})},setTransition:function(e,i){var a=e.style,o=t(e);!this.transition&&o.stop?o.stop():null!=a.webkitTransition?a.webkitTransition=i:null!=a.MozTransition?a.MozTransition=i:null!=a.msTransition?a.msTransition=i:null!=a.OTransition?a.OTransition=i:a.transition=i},getFreeArea:function(t,e,i){for(var a=Math.min(t+i.maxHoB,i.limitRow),o=Math.min(e+i.maxWoB,i.limitCol),n=o,l=a,s=i.matrix,r=t;l>r;++r)for(var c=e;o>c;++c)s[r+"-"+c]&&c>e&&n>c&&(n=c);for(var r=t;a>r;++r)for(var c=e;n>c;++c)s[r+"-"+c]&&r>t&&l>r&&(l=r);return{top:t,left:e,width:n-e,height:l-t}},setWallSize:function(t,e){var i=t.totalRow,a=t.totalCol,o=t.gutterY,n=t.gutterX,l=t.cellH,s=t.cellW,r=Math.max(0,s*a-n),c=Math.max(0,l*i-o);e.attr({"data-total-col":a,"data-total-row":i,"data-wall-width":Math.ceil(r),"data-wall-height":Math.ceil(c)}),t.limitCol<t.limitRow&&!e.attr("data-height")&&e.height(Math.ceil(c))}},n={giot:function(t,e){function i(t,e,i,a,o){for(var n=e;e+o>n;){for(var l=i;i+a>l;)f[n+"-"+l]=t,++l>c&&(c=l);++n>d&&(d=n)}}var a=e.runtime,n=a.limitRow,l=a.limitCol,s=0,r=0,c=a.totalCol,d=a.totalRow,h={},u=a.holes,m=null,f=a.matrix,p=Math.max(l,n),g=null,v=null,k=n>l?1:0,w=null,C=Math.min(l,n);for(var x in u)u.hasOwnProperty(x)&&i(u[x].id||!0,u[x].top,u[x].left,u[x].width,u[x].height);for(var y=0;p>y&&t.length;++y){k?r=y:s=y,w=null;for(var $=0;C>$&&t.length;++$)if(m=null,k?s=$:r=$,!a.matrix[r+"-"+s]){if(g=o.getFreeArea(r,s,a),null==e.fixSize){if(w&&!k&&a.minHoB>g.height){w.height+=g.height,w.resize=!0,i(w.id,w.y,w.x,w.width,w.height),o.setBlock(w,e);continue}if(w&&k&&a.minWoB>g.width){w.width+=g.width,w.resize=!0,i(w.id,w.y,w.x,w.width,w.height),o.setBlock(w,e);continue}}if(a.keepOrder)m=t.shift(),m.resize=!0;else{for(var x=0;x<t.length;++x)if(!(t[x].height>g.height||t[x].width>g.width)){m=t.splice(x,1)[0];break}if(null==m&&null==e.fixSize)for(var x=0;x<t.length;++x)if(null==t[x].fixSize){m=t.splice(x,1)[0],m.resize=!0;break}}if(null!=m)m.resize&&(k?(m.width=g.width,"auto"==e.cellH&&o.adjustBlock(m,e),m.height=Math.min(m.height,g.height)):(m.height=g.height,m.width=Math.min(m.width,g.width))),h[m.id]={id:m.id,x:s,y:r,width:m.width,height:m.height,resize:m.resize,fixSize:m.fixSize},w=h[m.id],i(w.id,w.y,w.x,w.width,w.height),o.setBlock(w,e);else{var v={x:s,y:r,fixSize:0};if(k){v.width=g.width,v.height=0;for(var A=s-1,T=r;f[T+"-"+A];)f[T+"-"+s]=!0,v.height+=1,T+=1}else{v.height=g.height,v.width=0;for(var T=r-1,A=s;f[T+"-"+A];)f[r+"-"+A]=!0,v.width+=1,A+=1}e.onGapFound(o.setBlock(v,e),e)}}}a.matrix=f,a.totalRow=d,a.totalCol=c}};e.addConfig=function(e){t.extend(o.defaultConfig,e)},e.createEngine=function(e){t.extend(n,e)},e.createPlugin=function(e){t.extend(o.plugin,e)},e.getMethod=function(t){return o[t]},window.Freewall=window.freewall=e}(window.Zepto||window.jQuery),$.ajaxSetup({cache:!1}),$(function(){return $(".tile").append("<i class='spinner fa fa-refresh fa-spin'></i>"),setIcons(),$(".tools").click(function(){var t="tools";access_token&&(t=t+"?access_token="+access_token),window.location=t}),$(".refresh, .clock").click(function(){refresh()}),startTime(),$(".dashboard").click(function(t){animateClick($(this)),t.stopImmediatePropagation(),t.preventDefault(),$(".refresh .icon").addClass("fa-spin"),window.location=$(this).find("a").attr("href")}),$(".history.tile").click(function(t){animateClick($(this)),t.stopImmediatePropagation(),t.preventDefault(),window.location="history"+(getUrlParameter("access_token")?"?access_token="+getUrlParameter("access_token"):"")}),readOnlyMode?!1:($(".switch, .dimmer, .momentary, .clock, .lock, .link, .themeLight, .camera, .music i, .light, .dimmerLight").click(function(){animateClick($(this))}),$(".switch, .light, .lock, .momentary, .themeLight, .camera, .dimmer, .dimmerLight").click(function(){$(this).closest(".tile").removeClass("active").removeClass("inactive");var t=$(this).attr("data-type"),e=$(this).attr("data-value"),i="toggle";if("switch"==t||"light"==t||"themeLight"==t||"dimmer"==t||"dimmerLight"==t){if("on"==e)i="off",$(this).attr("data-value","off"),$(this).closest(".tile").addClass("inactive");else if(i="on",$(this).attr("data-value","on"),$(this).closest(".tile").addClass("active"),"dimmer"==t||"dimmerLight"==t)return void sendCommand(t,$(this).attr("data-device"),"level",$(this).attr("data-level"))}else"lock"==t&&("locked"==e?(i="unlock",$(this).attr("data-value","unlocked"),$(this).closest(".tile").addClass("active")):(i="lock",$(this).attr("data-value","locked"),$(this).closest(".tile").addClass("inactive")));sendCommand(t,$(this).attr("data-device"),i)}),$(".dimmer, .dimmerLight").on("slidestop",function(t){var e=$(this).find("input").val();$(this).hasClass("active")&&(animateClick($(this)),sendCommand($(this).attr("data-type"),$(this).attr("data-device"),"level",e)),$(this).attr("data-level",e)}),$(".music").on("slidestop",function(t){var e=$(this).find("input").val();animateClick($(this)),sendCommand("music",$(this).attr("data-device"),"level",e),$(this).attr("data-level",e)}),$(".music .play").click(function(){var t=$(this).closest(".tile");$(this).closest(".tile").toggleClass("active"),sendCommand("music",t.attr("data-device"),"play")}),$(".music .pause").click(function(){var t=$(this).closest(".tile");$(this).closest(".tile").toggleClass("active"),sendCommand("music",t.attr("data-device"),"pause")}),$(".music .muted").click(function(){var t=$(this).closest(".tile");$(this).closest(".tile").toggleClass("muted"),sendCommand("music",t.attr("data-device"),"unmute")}),$(".music .unmuted").click(function(){var t=$(this).closest(".tile");$(this).closest(".tile").toggleClass("muted"),sendCommand("music",t.attr("data-device"),"mute")}),$(".music .back").click(function(){var t=$(this).closest(".tile");sendCommand("music",t.attr("data-device"),"previousTrack")}),$(".music .forward").click(function(){var t=$(this).closest(".tile");sendCommand("music",t.attr("data-device"),"nextTrack")}),$(".mode, .hello-home, .alarm").click(function(){$("#"+$(this).attr("data-popup")).popup("open")}),$("#mode-popup li").click(function(){$("#mode-popup").popup("close");var t=$(".mode");animateClick(t);var e=$(this).text();sendCommand("mode","mode",e);var i=$(".mode").attr("data-mode");t.removeClass(i),t.attr("data-mode",e),["Home","Away","Night"].indexOf(e)>=0?($("#mode-name").hide(),t.addClass(e)):$("#mode-name").html(e).show()}),$("#hello-home-popup li").on("click",function(){$("#hello-home-popup").popup("close"),animateClick($(".hello-home")),sendCommand("helloHome","helloHome",$(this).text())}),$("#alarm-popup li").click(function(){$("#alarm-popup").popup("close");var t=$(this).data("state");sendCommand("alarm",null,t),
updateAlarmTile(t)}),$(".thermostat:not(.null-setpoint) .up").click(function(){thermostatEvent($(this).closest(".tile"),1)}),$(".thermostat:not(.null-setpoint) .down").click(function(){thermostatEvent($(this).closest(".tile"),-1)}),void $(".video.smv img").each(function(){var t=$(this);setInterval(function(){var e=new Image,i=t.data("src"),a="?";i.indexOf("?")>-1&&(a="&"),e.src=i+a+"rand="+Math.random(),t.attr("src",e.src)},smvRate)}))});var fadeOn=100,fadeOff=200,polling,wtfCloud=!1;nextPoll(pollingRate),refresh(3600),CoolClock.config.skins={st:{outerBorder:{lineWidth:12,radius:100,color:"yellow",alpha:0},smallIndicator:{lineWidth:16,startAt:80,endAt:85,color:getClockColor(),alpha:1},largeIndicator:{lineWidth:2,startAt:80,endAt:85,color:getClockColor(),alpha:1},hourHand:{lineWidth:8,startAt:0,endAt:60,color:getClockColor(),alpha:1},minuteHand:{lineWidth:6,startAt:0,endAt:75,color:getClockColor(),alpha:1},secondHand:{lineWidth:5,startAt:80,endAt:85,color:"red",alpha:0},secondDecoration:{lineWidth:3,startAt:96,radius:4,fillColor:getClockColor(),color:"black",alpha:1}},st1:{outerBorder:{lineWidth:2,radius:80,color:getClockColor(),alpha:0},smallIndicator:{lineWidth:5,startAt:88,endAt:94,color:"yellow",alpha:0},largeIndicator:{lineWidth:5,startAt:90,endAt:94,color:getClockColor(),alpha:1},hourHand:{lineWidth:8,startAt:0,endAt:60,color:getClockColor(),alpha:1},minuteHand:{lineWidth:8,startAt:0,endAt:80,color:getClockColor(),alpha:1},secondHand:{lineWidth:5,startAt:89,endAt:94,color:getClockColor(),alpha:1},secondDecoration:{lineWidth:3,startAt:0,radius:4,fillColor:"black",color:"black",alpha:0}}};var cellSize=getUrlParameter("t")||tileSize,cellGutter=getUrlParameter("g")||4;$.ajaxSetup({statusCode:{401:function(){location.replace(appUrl)}}});